providers = ["python", "node", "..."]

[phases.setup]
nixPkgs = []

[phases.install]
dependsOn = ["setup"]
cmds = [
  "echo '=== Building frontend ==='",
  "echo 'Step 1: Installing Node.js dependencies...'",
  "cd frontend && npm install || (echo 'npm install failed' && exit 1)",
  "echo 'Step 2: Building frontend...'",
  "cd frontend && npm run build || (echo 'npm run build failed' && exit 1)",
  "echo 'Step 3: Verifying build output...'",
  "cd ..",
  "ls -la app/static/ || (echo 'ERROR: app/static/ not found!' && ls -la app/ && exit 1)",
  "echo '=== Frontend build complete ==='"
]

[phases.build]
cmds = []

[start]
cmd = "python3 start.py"
